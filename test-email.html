<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Test - Momentvm.club</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            line-height: 1.6;
        }
        .test-section {
            margin: 2rem 0;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .btn {
            background: #1e40af;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            margin: 0.5rem;
        }
        .btn:hover {
            background: #1d4ed8;
        }
        .log {
            background: #f3f4f6;
            padding: 1rem;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .warning { color: #f59e0b; }
    </style>
</head>
<body>
    <h1>Email Functionality Test</h1>
    
    <div class="test-section">
        <h2>Test Form</h2>
        <form id="testForm">
            <div>
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" value="Test User" required>
            </div>
            <div>
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" value="test@example.com" required>
            </div>
            <div>
                <label for="linkedin">LinkedIn:</label>
                <input type="url" id="linkedin" name="linkedin" value="https://linkedin.com/in/test" required>
            </div>
            <div>
                <label for="role">Role:</label>
                <input type="text" id="role" name="role" value="Test Role" required>
            </div>
            <div>
                <label for="expertise">Expertise:</label>
                <select id="expertise" name="expertise" required>
                    <option value="engineering">Engineering & Product</option>
                </select>
            </div>
            <div>
                <label for="motivation">Motivation:</label>
                <textarea id="motivation" name="motivation" required>This is a test submission</textarea>
            </div>
            <button type="submit" class="btn">Test Email Submission</button>
        </form>
    </div>
    
    <div class="test-section">
        <h2>Individual Tests</h2>
        <button onclick="testEmailJS()" class="btn">Test EmailJS Only</button>
        <button onclick="testNetlifyFunction()" class="btn">Test Netlify Function</button>
        <button onclick="testFormspree()" class="btn">Test Formspree</button>
        <button onclick="testEmailClient()" class="btn">Test Email Client</button>
        <button onclick="testEmailJSSimple()" class="btn">Test EmailJS Playground Method</button>
    </div>
    
    <div class="test-section">
        <h2>Console Log</h2>
        <div id="log" class="log"></div>
        <button onclick="clearLog()" class="btn">Clear Log</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script>
        // Override console methods to capture logs
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        
        function addToLog(message, type = 'info') {
            const log = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            const className = type === 'error' ? 'error' : type === 'warning' ? 'warning' : 'success';
            log.innerHTML += `<span class="${className}">[${timestamp}] ${message}</span>\n`;
            log.scrollTop = log.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToLog(args.join(' '), 'info');
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToLog(args.join(' '), 'error');
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addToLog(args.join(' '), 'warning');
        };
        
        function clearLog() {
            document.getElementById('log').innerHTML = '';
        }
        
        // Test EmailJS
        async function testEmailJS() {
            try {
                console.log('Testing EmailJS...');
                
                if (typeof emailjs === 'undefined') {
                    throw new Error('EmailJS not loaded');
                }
                
                emailjs.init('CH7Idv-T3WhDQYjtb');
                
                const result = await emailjs.send('default_service', 'template_1bsatl6', {
                    to_name: 'Test',
                    from_name: 'Test User',
                    from_email: 'test@example.com',
                    linkedin_url: 'https://linkedin.com/in/test',
                    role: 'Test Role',
                    company: 'Test Company',
                    expertise: 'engineering',
                    motivation: 'Test motivation',
                    submission_date: new Date().toLocaleString(),
                    form_type: 'Test'
                });
                
                console.log('EmailJS test successful:', result);
            } catch (error) {
                console.error('EmailJS test failed:', JSON.stringify(error, null, 2));
            }
        }
        
        // Test Netlify Function
        async function testNetlifyFunction() {
            try {
                console.log('Testing Netlify function...');
                
                const response = await fetch('/.netlify/functions/submit-form', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        name: 'Test User',
                        email: 'test@example.com',
                        linkedin: 'https://linkedin.com/in/test',
                        role: 'Test Role',
                        company: 'Test Company',
                        expertise: 'engineering',
                        motivation: 'Test motivation',
                        form_type: 'Test',
                        submission_date: new Date().toLocaleString()
                    })
                });
                
                const result = await response.json();
                console.log('Netlify function test result:', result);
            } catch (error) {
                console.error('Netlify function test failed:', error);
            }
        }
        
        // Test Formspree
        async function testFormspree() {
            try {
                console.log('Testing Formspree...');
                
                const formData = new FormData();
                formData.append('name', 'Test User');
                formData.append('email', 'test@example.com');
                formData.append('linkedin', 'https://linkedin.com/in/test');
                formData.append('role', 'Test Role');
                formData.append('company', 'Test Company');
                formData.append('expertise', 'engineering');
                formData.append('motivation', 'Test motivation');
                formData.append('form_type', 'Test');
                formData.append('submission_date', new Date().toLocaleString());
                
                const response = await fetch('https://formspree.io/f/xpzgwqjq', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                });
                
                const result = await response.json();
                console.log('Formspree test result:', result);
            } catch (error) {
                console.error('Formspree test failed:', error);
            }
        }
        
        // Test Email Client
        function testEmailClient() {
            try {
                console.log('Testing email client...');
                
                const emailBody = `
Test Email Submission

Name: Test User
Email: test@example.com
LinkedIn: https://linkedin.com/in/test
Role: Test Role
Company: Test Company
Expertise: engineering
Motivation: Test motivation
Submission Date: ${new Date().toLocaleString()}

---
This is a test submission.
                `;
                
                const mailtoLink = `mailto:momentvmclub@gmail.com?subject=Test Application: Test User&body=${encodeURIComponent(emailBody)}`;
                
                const tempLink = document.createElement('a');
                tempLink.href = mailtoLink;
                tempLink.style.display = 'none';
                document.body.appendChild(tempLink);
                
                tempLink.click();
                document.body.removeChild(tempLink);
                
                console.log('Email client test completed');
            } catch (error) {
                console.error('Email client test failed:', error);
            }
        }
        
        // Handle form submission
        document.getElementById('testForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const data = Object.fromEntries(formData);
            
            console.log('Form data:', data);
            
            // Test the full submission flow
            handleFormSubmission(this, 'test');
        });
        
        // Import the form handling functions from script.js
        // (You'll need to copy the relevant functions here or include script.js)
    </script>
</body>
</html>         // Simple EmailJS test matching playground
        async function testEmailJSSimple() {
            try {
                console.log("Testing EmailJS with playground method...");
                
                if (typeof emailjs === "undefined") {
                    throw new Error("EmailJS not loaded");
                }
                
                emailjs.init("CH7Idv-T3WhDQYjtb");
                
                // Create a simple form element like in playground
                const testForm = document.createElement("form");
                testForm.innerHTML = `
                    <input type="hidden" name="from_name" value="Test User">
                    <input type="hidden" name="from_email" value="test@example.com">
                    <input type="hidden" name="linkedin_url" value="https://linkedin.com/in/test">
                    <input type="hidden" name="role" value="Test Role">
                    <input type="hidden" name="company" value="Test Company">
                    <input type="hidden" name="expertise" value="engineering">
                    <input type="hidden" name="motivation" value="Test motivation">
                    <input type="hidden" name="submission_date" value="${new Date().toLocaleString()}">
                    <input type="hidden" name="email" value="test@example.com">
                    <input type="hidden" name="name" value="Test User">
                `;
                
                const result = await emailjs.sendForm("default_service", "template_1bsatl6", testForm);
                console.log("EmailJS playground method successful:", result);
            } catch (error) {
                console.error("EmailJS playground method failed:", JSON.stringify(error, null, 2));
            }
        }
